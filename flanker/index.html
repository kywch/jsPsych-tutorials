<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://kywch.github.io/jsPsych-in-Qualtrics/flanker/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Embedding Flanker Task - jsPsych in Qualtrics Tutorial Series</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Embedding Flanker Task";
        var mkdocs_page_input_path = "flanker.md";
        var mkdocs_page_url = "/jsPsych-in-Qualtrics/flanker/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-D3RPWB8SEL"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-D3RPWB8SEL');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> jsPsych in Qualtrics Tutorial Series
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 1. The Basics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../github-pages/">Hosting jsPsych</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hello-world/">Embedding Hello World!</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../save-php/">Saving Data with PHP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../participants/">Recruiting Participants</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 2. Case studies</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../rt-task/">Embedding Reaction-Time Task</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Embedding Flanker Task</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#the-start-demo-flanker-taskhtml">The start: demo-flanker-task.html</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-files-in-public-github-repositories">Using files in public GitHub repositories</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#using-this-tutorials-github-files-for-the-flanker-task">Using this tutorial's GitHub files for the flanker task</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#first-transformation-demo-flanker-transformedhtml-and-flanker_mainjs">First transformation: demo-flanker-transformed.html and flanker_main.js</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#step-1-copy-demo-flankerhtml-to-demo-flanker-transformedhtml">Step 1. Copy demo-flanker.html to demo-flanker-transformed.html</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-2-create-a-new-file-flanker_mainjs">Step 2. Create a new file flanker_main.js</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-3-cut-and-paste-the-experiment-related-code">Step 3. Cut and paste the experiment-related code</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-4-flanker_mainjs-use-the-github-hosted-stimuli-images">Step 4. flanker_main.js: Use the GitHub-hosted stimuli images</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#change-1-adding-the-image-hosting-site">Change 1: Adding the image hosting site</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#change-2-adding-repo_site-in-instructions">Change 2: Adding repo_site in instructions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#change-3-adding-repo_site-in-test_stimuli">Change 3: Adding repo_site in test_stimuli</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-5-demo-flanker-transformedhtml-import-flanker_mainjs">Step 5. demo-flanker-transformed.html: Import flanker_main.js</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#change-1-using-the-github-hosted-js-and-css-files">CHANGE 1: Using the GitHub-hosted JS and CSS files</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#change-2-loading-the-main-experiment-script-in-the-same-local-folder">CHANGE 2: Loading the main experiment script in the same local folder</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#does-this-work">Does this work?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-6-upload-demo-flanker-transformedhtml-and-flanker_mainjs-to-github">Step 6: Upload demo-flanker-transformed.html and flanker_main.js to GitHub</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#second-transformation-demo-flanker-transformed-with-display-elementhtml">Second transformation: demo-flanker-transformed-with-display-element.html</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#change-1-using-display_element">Change 1: Using display_element</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-2-adding-display_stage-css-and-div">Change 2: Adding display_stage CSS and Div</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-3-adding-extra-scripts-for-qualtrics">Change 3: Adding extra scripts for Qualtrics</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#third-transformation-demo-flanker-qualtricsjs">Third transformation: demo-flanker-qualtrics.js</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#change-1-hiding-the-next-button">Change 1: Hiding the Next button</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-2-defining-and-load-required-resources">Change 2: Defining and load required resources</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-3-appending-the-display_stage-div-using-jquery">Change 3: Appending the display_stage Div using jQuery</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-4-wrapping-jspsychinit-in-a-function">Change 4: Wrapping jsPsych.init() in a function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-5-summarizing-and-save-the-results-to-qualtrics">Change 5: Summarizing and save the results to Qualtrics</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-6-adding-the-clean-up-and-continue-functions">Change 6: Adding the clean up and continue functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#finally-embedding-jspsych-in-qualtrics">Finally, embedding jsPsych in Qualtrics</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#step-1-create-a-new-qualtrics-project-and-then-a-new-question">Step 1. Create a new Qualtrics project and then a new question</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-2-open-the-question-javascript-editor-and-copy-paste-the-whole-demo-simple-rt-task-qualtricsjs">Step 2. Open the Question JavaScript editor and copy paste the whole demo-simple-rt-task-qualtrics.js</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-3-open-the-question-html-editor-and-copy-paste-the-portion-of-demo-flanker-transformed-with-display-elementhtml">Step 3. Open the Question HTML editor and copy paste the portion of demo-flanker-transformed-with-display-element.html</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-4-creating-embedded-data-elements">Step 4. Creating Embedded Data elements</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-5-move-set-embedded-data-block-to-the-top-of-survey-flow">Step 5. Move Set Embedded Data block to the top of Survey Flow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-6-add-a-check-for-the-embedded-data">Step 6. Add a check for the Embedded Data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#step-7-publish-and-test">Step 7. Publish and test!</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#do-you-also-want-to-save-the-trial-by-trial-data">Do you also want to save the trial-by-trial data?</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../choose-and-solve/">Embedding Choose-And-Solve Task</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rc-rage/">Embedding Reactive AGression Task</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../stop-it/">Embedding Stop Signal Task (STOP-IT)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../audio-test/">Embedding Quick Audio Test</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mood-induction/">Embedding Mood Induction</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">jsPsych in Qualtrics Tutorial Series</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Part 2. Case studies &raquo;</li>
      <li>Embedding Flanker Task</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="embedding-the-jspsych-flanker-task-into-qualtrics">Embedding the jsPsych Flanker Task into Qualtrics</h1>
<p><font color=red><strong>Please NOTE!! This tutorial series is based on version <code>6.x</code> of jsPsych. Due to extensive changes in jsPsych 7.x and above, many things in this tutorial may not work with jsPsych v7.x and above. So, I instead use the <code>6.1.0 version</code> below, <a href="https://github.com/kywch/jsPsych">which I forked previously</a>. Or, you can get <a href="https://github.com/jspsych/jsPsych/releases/download/v6.3.1/jspsych-6.3.1.zip">jsPsych v6.3.1 (the last jsPsych 6.x release) from here</a>.</strong></font></p>
<p>Here, I used <code>v6.1.0</code>, which is not much different from <code>v6.3.1</code>**</font></p>
<p>Let's start from the <code>demo-flanker.html</code> in <a href="https://github.com/jspsych/jsPsych/blob/master/examples/demo-flanker.html">the jsPsych repository</a> and embed it to qualtrics. The current demo file was revised to incorporate jsPsych v7, so it's different from what I used to create this tutorial. For details of <code>demo-flanker.html</code> in jsPsych v6.x, please read <a href="https://github.com/kywch/jsPsych-in-Qualtrics/tree/master/flanker">the separate tutorial in this GitHub repository</a>.</p>
<p>You can first try the task by clicking <a href="https://kywch.github.io/jsPsych/examples/demo-flanker.html">HERE</a>.</p>
<hr />
<h2 id="the-start-demo-flanker-taskhtml">The start: <code>demo-flanker-task.html</code></h2>
<p>The experiment code, <code>demo-flanker.html</code> is included in <a href="https://github.com/kywch/jsPsych-in-Qualtrics/blob/master/flanker/demo-flanker.html">the <code>flanker</code> folder in this tutorial repository</a>. 
Let's make the code work in a separate folder like <a href="https://www.jspsych.org/6.3/tutorials/hello-world/#step-2-create-a-folder-to-store-your-experiment-files">the hello-world example</a>.</p>
<p>To do so, you need to change the url of jsPsych scripts, stylesheet, and stimuli of the experiment code. In this tutorial, we will change those twice to make the flanker task (1) run on a new folder and (2) use the GitHub-hosted resources.</p>
<p>First, let's make it run locally. To do so, The jsPsych library, plugins, and stylesheet come from the local folder. As you can see, the <code>demo-flanker.html</code> in this repository looks at the local <code>jspsych-6.1.0</code> folder for these files.</p>
<pre><code class="language-html">&lt;script src=&quot;jspsych-6.1.0/jspsych.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;jspsych-6.1.0/css/jspsych.css&quot;&gt;&lt;/link&gt;
</code></pre>
<p>The experiment also needs stimuli images. So, you need to create a folder called <code>img</code> in the experiment folder and copy 
<a href="https://raw.githubusercontent.com/kywch/jsPsych/master/examples/img/con1.png">con1.png</a>, 
<a href="https://raw.githubusercontent.com/kywch/jsPsych/master/examples/img/con2.png">con2.png</a>,
<a href="https://raw.githubusercontent.com/kywch/jsPsych/master/examples/img/inc1.png">inc1.png</a>,
and <a href="https://raw.githubusercontent.com/kywch/jsPsych/master/examples/img/inc2.png">inc2.png</a> into the <code>img</code> folder.</p>
<p>Your folder should look like this (and imagine the html file has the name <code>demo-flanker.html</code>).</p>
<p><img alt="Simple RT-task folder" src="../img/rt-task-start_RT_task_folder.jpg" /></p>
<hr />
<h2 id="using-files-in-public-github-repositories">Using files in public GitHub repositories</h2>
<p>To use jsPsych in Qualtrics, the jsPsych javascript and CSS files need to be online and loadable from Qualtrics. 
You can make your files online using GitHub Pages, as explained in the <a href="../github-pages/">Hosting jsPsych</a> or the <a href="../rt-task/#hosting-this-task-in-github">Hosting RT Task</a>. </p>
<p><strong>But you can do so WITHOUT setting up your own GitHub Pages.</strong></p>
<p>If you see a GitHub file that you want to embed in your experiment, you can use <a href="https://www.jsdelivr.com/?docs=gh">jSDelivr</a> to fetch the file like <code>https://cdn.jsdelivr.net/gh/&lt;github-username&gt;/&lt;repository-name&gt;/&lt;file-name&gt;</code>.</p>
<p><font color=red><b>WARNING: If you are developing your experiment and making frequent changes, 
jsDelivr is NOT your best option because it takes up to 24 hours to serve the modified files.</b></font> 
Read <a href="https://www.freecodecamp.org/news/how-to-use-jsdelivr-e64e5590f66e/">How to use jsDelivr</a> to learn more about jsDelivr and Content Delivery Network (CDN) in general.</p>
<h3 id="using-this-tutorials-github-files-for-the-flanker-task">Using this tutorial's GitHub files for the flanker task</h3>
<p>This jsPsych-in-Qualtrics repository has the files necessary to run the flanker task. 
These files can be embedded via jSDelivr (github-username: <code>kywch</code>, repository-name: <code>jsPsych-in-Qualtrics</code>, experiment-folder: <code>flanker</code>). 
You need eight files to run the flanker experiment.</p>
<ul>
<li><code>jspsych.css</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/css/jspsych.css">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/css/jspsych.css</a></li>
<li><code>jspsych.js</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/jspsych.js">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/jspsych.js</a></li>
<li><code>jspsych-html-keyboard-response.js</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js</a></li>
<li><code>jspsych-image-keyboard-response.js</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js</a></li>
<li><code>con1.png</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/con1.png">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/con1.png</a></li>
<li><code>con2.png</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/con2.png">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/con2.png</a></li>
<li><code>inc1.png</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/inc1.png">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/inc1.png</a></li>
<li><code>inc2.png</code>: <a href="https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/inc2.png">https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/img/inc2.png</a></li>
</ul>
<hr />
<h2 id="first-transformation-demo-flanker-transformedhtml-and-flanker_mainjs">First transformation: <code>demo-flanker-transformed.html</code> and <code>flanker_main.js</code></h2>
<p>I prefer to separate out the experiment-related code from the operation-related code, following <a href="https://expfactory.github.io/experiments/">the Experiment Factory</a> style. 
If you haven't, please visit <a href="https://expfactory.github.io/experiments/">the Experiment Factory library</a>, which contain a ton of experiments with running demos and their code.</p>
<p>In the <code>demo-flanker.html</code>, constructing the <code>timeline</code> can be considered to be experiment-related, 
and the remaining parts that also appear in <a href="../hello-world/">the Hello-World example</a>, such as loading <code>jspsych.js</code> and <code>jsPsych.init()</code>, can be considered to be operation-related. 
Here, I am separating the experiment-related code and the operation-related code and putting the code into <code>flanker_main.js</code> and <code>demo-flanker-transformed.html</code>, respectively, by following steps:</p>
<h3 id="step-1-copy-demo-flankerhtml-to-demo-flanker-transformedhtml">Step 1. Copy <code>demo-flanker.html</code> to <code>demo-flanker-transformed.html</code></h3>
<h3 id="step-2-create-a-new-file-flanker_mainjs">Step 2. Create a new file <code>flanker_main.js</code></h3>
<p>And open <code>flanker_main.js</code> in a new editor window.</p>
<h3 id="step-3-cut-and-paste-the-experiment-related-code">Step 3. Cut and paste the experiment-related code</h3>
<p>Open <code>demo-flanker-transformed.html</code>. You should have both <code>flanker_main.js</code> and <code>demo-flanker-transformed.html</code> opened.</p>
<p>Select the code from the <code>/* experiment parameters */</code> line to the <code>timeline.push(debrief_block);</code> line, <strong>cut the selection</strong>, and paste it to <code>flanker_main.js</code>. <strong>REPEAT</strong>. The code is being <strong>cut-and-pasted</strong> (NOT copy-pasted). </p>
<pre><code class="language-js">/* experiment parameters */
var reps_per_trial_type = 4;

/*set up welcome block*/
var welcome = {
  type: &quot;html-keyboard-response&quot;,
  stimulus: &quot;Welcome to the experiment. Press any key to begin.&quot;
};

/*set up instructions block*/
var instructions = {
  type: &quot;html-keyboard-response&quot;,
  stimulus: &quot;&lt;p&gt;In this task, you will see five arrows on the screen, like the example below.&lt;/p&gt;&quot; +
    &quot;&lt;img src='img/inc1.png'&gt;&lt;/img&gt;&quot; +
    &quot;&lt;p&gt;Press the left arrow key if the middle arrow is pointing left. (&lt;)&lt;/p&gt;&quot; +
    &quot;&lt;p&gt;Press the right arrow key if the middle arrow is pointing right. (&gt;)&lt;/p&gt;&quot; +
    &quot;&lt;p&gt;Press any key to begin.&lt;/p&gt;&quot;,
  post_trial_gap: 1000
};

/*defining stimuli*/
var test_stimuli = [
  {
    stimulus: &quot;img/con1.png&quot;,
    data: { stim_type: 'congruent', direction: 'left'}
  },
  {
    stimulus: &quot;img/con2.png&quot;,
    data: { stim_type: 'congruent', direction: 'right'}
  },
  {
    stimulus: &quot;img/inc1.png&quot;,
    data: { stim_type: 'incongruent', direction: 'right'}
  },
  {
    stimulus: &quot;img/inc2.png&quot;,
    data: { stim_type: 'incongruent', direction: 'left'}
  }
];

/* defining test timeline */
var test = {
  timeline: [{
    type: 'image-keyboard-response',
    choices: [37, 39],
    trial_duration: 1500,
    stimulus: jsPsych.timelineVariable('stimulus'),
    data: jsPsych.timelineVariable('data'),
    on_finish: function (data) {
      var correct = false;
      if (data.direction == 'left' &amp;&amp; data.key_press == 37 &amp;&amp; data.rt &gt; -1) {
        correct = true;
      } else if (data.direction == 'right' &amp;&amp; data.key_press == 39 &amp;&amp; data.rt &gt; -1) {
        correct = true;
      }
      data.correct = correct;
    },
    post_trial_gap: function () {
      return Math.floor(Math.random() * 1500) + 500;
    }
  }],
  timeline_variables: test_stimuli,
  sample: {
    type: 'fixed-repetitions',
    size: reps_per_trial_type
  }
};

/*defining debriefing block*/
var debrief = {
  type: &quot;html-keyboard-response&quot;,
  stimulus: function () {
    var total_trials = jsPsych.data.get().filter({
      trial_type: 'image-keyboard-response'
    }).count();
    var accuracy = Math.round(jsPsych.data.get().filter({
      correct: true
    }).count() / total_trials * 100);
    var congruent_rt = Math.round(jsPsych.data.get().filter({
      correct: true,
      stim_type: 'congruent'
    }).select('rt').mean());
    var incongruent_rt = Math.round(jsPsych.data.get().filter({
      correct: true,
      stim_type: 'incongruent'
    }).select('rt').mean());
    return &quot;&lt;p&gt;You responded correctly on &lt;strong&gt;&quot; + accuracy + &quot;%&lt;/strong&gt; of the trials.&lt;/p&gt; &quot; +
      &quot;&lt;p&gt;Your average response time for congruent trials was &lt;strong&gt;&quot; + congruent_rt + &quot;ms&lt;/strong&gt;.&lt;/p&gt;&quot; +
      &quot;&lt;p&gt;Your average response time for incongruent trials was &lt;strong&gt;&quot; + incongruent_rt + &quot;ms&lt;/strong&gt;.&lt;/p&gt;&quot; +
      &quot;&lt;p&gt;Press any key to complete the experiment. Thank you!&lt;/p&gt;&quot;;
  }
};

/*set up experiment structure*/
var timeline = [];
timeline.push(welcome);
timeline.push(instructions);
timeline.push(test);
timeline.push(debrief);
</code></pre>
<h3 id="step-4-flanker_mainjs-use-the-github-hosted-stimuli-images">Step 4. <code>flanker_main.js</code>: Use the GitHub-hosted stimuli images</h3>
<p>Let's use <a href="./#using-this-tutorials-github-files-for-the-flanker-task">the above GitHub-hosted images</a>. </p>
<p>The <code>flanker_main.js</code> in this tutorial has a few changes to do so. Let's see these changes.</p>
<h4 id="change-1-adding-the-image-hosting-site">Change 1: Adding the image hosting site</h4>
<p>The <code>repo_site</code> variable was added to locate the JSDELIVR site that hosts stimuli images. You can easily use your repository by changing this line.</p>
<pre><code class="language-js">// Use JSDELIVR to get the files from a GitHub repository
// https://cdn.jsdelivr.net/gh/&lt;github-username&gt;/&lt;repository-name&gt;/&lt;specific folder or file&gt;
var repo_site = &quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/&quot;;
</code></pre>
<h4 id="change-2-adding-repo_site-in-instructions">Change 2: Adding <code>repo_site</code> in <code>instructions</code></h4>
<p>The <code>repo_site</code> variable should be added to wherever <code>img/con1.png</code>, <code>img/con2.png</code>, <code>img/inc1.png</code>, and <code>img/inc2.png</code> are used like the below. 
The <code>find</code> function really helps in doing so.</p>
<pre><code class="language-js">var instructions = {
  type: &quot;html-keyboard-response&quot;,
  stimulus: &quot;&lt;p&gt;In this task, you will see five arrows on the screen, like the example below.&lt;/p&gt;&quot; +
    &quot;&lt;img src='&quot; + repo_site + &quot;img/inc1.png'&gt;&lt;/img&gt;&quot; +
    &quot;&lt;p&gt;Press the left arrow key if the middle arrow is pointing left. (&lt;)&lt;/p&gt;&quot; +
    &quot;&lt;p&gt;Press the right arrow key if the middle arrow is pointing right. (&gt;)&lt;/p&gt;&quot; +
    &quot;&lt;p&gt;Press any key to begin.&lt;/p&gt;&quot;,
  post_trial_gap: 1000
};
</code></pre>
<h4 id="change-3-adding-repo_site-in-test_stimuli">Change 3: Adding <code>repo_site</code> in <code>test_stimuli</code></h4>
<pre><code class="language-js">var test_stimuli = [
  {
    stimulus: repo_site + &quot;img/con1.png&quot;,
    data: { stim_type: 'congruent', direction: 'left'}
  },
  {
    stimulus: repo_site + &quot;img/con2.png&quot;,
    data: { stim_type: 'congruent', direction: 'right'}
  },
  {
    stimulus: repo_site + &quot;img/inc1.png&quot;,
    data: { stim_type: 'incongruent', direction: 'right'}
  },
  {
    stimulus: repo_site + &quot;img/inc2.png&quot;,
    data: { stim_type: 'incongruent', direction: 'left'}
  }
];
</code></pre>
<h3 id="step-5-demo-flanker-transformedhtml-import-flanker_mainjs">Step 5. <code>demo-flanker-transformed.html</code>: Import <code>flanker_main.js</code></h3>
<p>Cutting the experiment-related code makes the <code>demo-flanker-transformed.html</code> file much shorter. </p>
<p>Let's also use <a href="./#using-this-tutorials-github-files-for-the-flanker-task">the GitHub-hosted JS and CSS files (above)</a>. 
In addition, you also need to load <code>flanker_main.js</code> by using a <code>&lt;script&gt;</code> tag like the other jspsych plugin files (see <a href="https://www.jspsych.org/6.3/tutorials/hello-world/#step-6-use-the-jspsych-html-keyboard-response-plugin-to-print-a-message">the original jsPsych v6.3 tutorial</a>).</p>
<p>You can use your own repository by creating the jsDelivr link by following <a href="https://www.jsdelivr.com/?docs=gh">this guide</a>.</p>
<h4 id="change-1-using-the-github-hosted-js-and-css-files">CHANGE 1: Using the GitHub-hosted JS and CSS files</h4>
<pre><code class="language-html">&lt;!-- CHANGE 1: Using the GitHub-hosted files --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/jspsych.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/css/jspsych.css&quot;&gt;
</code></pre>
<h4 id="change-2-loading-the-main-experiment-script-in-the-same-local-folder">CHANGE 2: Loading the main experiment script in the same local folder</h4>
<pre><code class="language-html">&lt;!-- CHANGE 2: Loading the main experiment script in the same folder--&gt;
&lt;script src=&quot;flanker_main.js&quot;&gt;&lt;/script&gt;
</code></pre>
<h3 id="does-this-work">Does this work?</h3>
<p>Let's find out by opening <code>demo-flanker-transformed.html</code> in a browser. </p>
<h3 id="step-6-upload-demo-flanker-transformedhtml-and-flanker_mainjs-to-github">Step 6: Upload <code>demo-flanker-transformed.html</code> and <code>flanker_main.js</code> to GitHub</h3>
<p>If this works, you may want to start a new GitHub repository for this task, as I did with <a href="../rt-task/#hosting-this-task-in-github">my simple Reaction Time Task</a>.</p>
<p>Or, you may just want to try this flanker task in the Qualtrics. In that case, you can use the <code>flanker_main.js</code> in this tutorial GitHub repository, 
which is at <a href='https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/flanker_main.js'>https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/flanker_main.js</a> and available for Qualtrics to load.</p>
<hr />
<h2 id="second-transformation-demo-flanker-transformed-with-display-elementhtml">Second transformation: <code>demo-flanker-transformed-with-display-element.html</code></h2>
<p>Adding the <code>display_element</code> parameter in the <code>jsPsych.init()</code> and having additional control over the display element is important for embedding jsPsych into Qualtrics. 
The <code>demo-flanker-transformed-with-display-element.html</code> file in <a href="https://github.com/kywch/jsPsych-in-Qualtrics/blob/master/flanker/demo-simple-rt-task-transformed-with-display-element.html">this GitHub repository</a> contains three changes from the <code>demo-flanker-transformed.html</code>. 
When you open <code>demo-flanker-transformed-with-display-element.html</code> in a browser, you should see the same flanker task. </p>
<p>Let's look at each change.</p>
<h3 id="change-1-using-display_element">Change 1: Using <code>display_element</code></h3>
<p>By adding the <code>display_element</code> parameter in the <code>jsPsych.init()</code> like below, jsPsych will render the experiment in the <code>&lt;div&gt;</code> called <code>display_stage</code>, which the current script does not have yet. So, let's add the <code>display_stage</code>.</p>
<pre><code class="language-js">/* start the experiment */
jsPsych.init({
  timeline: timeline,
  /* Change 1: Using `display_element` */
  display_element: 'display_stage',
  on_finish: function () {
    jsPsych.data.displayData();
  }
});
</code></pre>
<h3 id="change-2-adding-display_stage-css-and-div">Change 2: Adding <code>display_stage</code> CSS and Div</h3>
<p>The <code>display_stage</code> needs below CSS and HTML code after the <code>&lt;body&gt;</code> tag, which also include the <code>display_stage_background</code>. Both are necessary to function well.</p>
<pre><code class="language-html">&lt;style&gt;
    #display_stage_background {
        width: 100vw;
        background-color: white;
        z-index: -1;
    }

    #display_stage {
        position: fixed;
        left: 1vw;
        top: 1vh;
        height: 98vh;
        width: 98vw;
        background-color: white;
        box-shadow: 1px 1px 1px #999;
        border-radius: 15px;
        z-index: 0;
        overflow-y: hidden;
        overflow-x: hidden;
    }
&lt;/style&gt;

&lt;div id='display_stage_background'&gt;&lt;/div&gt;
&lt;div id='display_stage'&gt;&lt;/div&gt;
</code></pre>
<h3 id="change-3-adding-extra-scripts-for-qualtrics">Change 3: Adding extra scripts for Qualtrics</h3>
<p>The below scripts are not necessary to run this reaction time experiment, but you need to copy-paste these in Qualtrics later. </p>
<p>One critical point is that now we use the jsPsych stylesheet hosted in the GitHub Pages 
(explained above in the <a href="./#using-this-tutorials-github-files-for-the-flanker-task">Using the jsPsych files</a> section) 
instead of the CSS file in your computer. This is important because Qualtrics can also access the GitHub-hosted files.</p>
<pre><code class="language-html">&lt;!-- Change 3: Adding extra scripts for Qualtrics --&gt;
&lt;!-- Use JSDELIVR to get the files from a GitHub repository
   https://cdn.jsdelivr.net/gh/&lt;github-username&gt;/&lt;repository-name&gt;/&lt;specific folder or file&gt; --&gt;
&lt;link href=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/css/jspsych.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;&lt;/link&gt;

&lt;div&gt;
    &lt;span style=&quot;font-size: 24px;&quot;&gt;
    &lt;br&gt;&lt;br&gt;
    If you are seeing this message for &lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;more than 5 minutes&lt;/b&gt;&lt;/span&gt;,&lt;br&gt;
    please screen-capture this screen and send the image to us.
    &lt;br&gt;&lt;br&gt;
    &lt;span style=&quot;font-size: 28px;&quot;&gt;We are very sorry for the inconvenience.&lt;/span&gt;
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>
<hr />
<h2 id="third-transformation-demo-flanker-qualtricsjs">Third transformation: <code>demo-flanker-qualtrics.js</code></h2>
<p>To make your jsPsych experiment work in Qualtrics, you need to add your code to the below skeleton provided by Qualtrics Question JavaScript Editor. 
For details, see the <a href="https://www.qualtrics.com/support/survey-platform/survey-module/question-options/add-javascript/">Add JavaScript help page</a>.</p>
<pre><code class="language-js">Qualtrics.SurveyEngine.addOnload(function()
{
    /*Place your JavaScript here to run when the page loads*/

});

Qualtrics.SurveyEngine.addOnReady(function()
{
    /*Place your JavaScript here to run when the page is fully displayed*/

});

Qualtrics.SurveyEngine.addOnUnload(function()
{
    /*Place your JavaScript here to run when the page is unloaded*/

});
</code></pre>
<p>The <code>demo-flanker-qualtrics.js</code> file in <a href="https://github.com/kywch/jsPsych-in-Qualtrics/blob/master/rt-task/demo-simple-rt-task-qualtrics.js">this GitHub repository</a> contains several changes from <code>demo-flanker-transformed-with-display-element.html</code> and can be direclty copy-pasted into the Qualtrics Question JavaScript Editor.</p>
<p>By separating the experiment-related code from the operation-related code, converting the html file to Qualtrics JavaScript function is pretty much similar to <a href="../hello-world/#second-transformation-qualtricsjs">the Hello-World example</a>.</p>
<p>Let's look at each change.</p>
<h3 id="change-1-hiding-the-next-button">Change 1: Hiding the Next button</h3>
<p>The below javascript code hides the Next button and puts the javascript code in the driving seat.</p>
<pre><code class="language-js">// Retrieve Qualtrics object and save in qthis
var qthis = this;

// Hide buttons
qthis.hideNextButton();
</code></pre>
<h3 id="change-2-defining-and-load-required-resources">Change 2: Defining and load required resources</h3>
<p>The below javascript defines where the necessary files are so that Qualtrics can load these. If you enabled GitHub Pages of your repository, Qualtrics can load the necessary JS, CSS, and image files right away. Or, you can provide the embeddable links via jsDelivr. Here, let's continue to use jsDelivr.</p>
<p>One way to check whether these files are accessilbe is to view the source of <code>demo-flanker-transformed.html</code> and click the imported scripts. For example of <code>jspsych.js</code>, <a href='https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/jspsych.js'>https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/jspsych.js</a>.</p>
<pre><code class="language-js">// https://cdn.jsdelivr.net/gh/&lt;github-username&gt;/&lt;repository-name&gt;/&lt;experiment-folder&gt;
var task_github = &quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/&quot;; 

// requiredResources must include all the JS files that demo-simple-rt-task-transformed.html uses.
var requiredResources = [
    task_github + &quot;jspsych-6.1.0/jspsych.js&quot;,
    task_github + &quot;jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js&quot;,
    task_github + &quot;jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js&quot;,
    task_github + &quot;flanker_main.js&quot;
];

function loadScript(idx) {
    console.log(&quot;Loading &quot;, requiredResources[idx]);
    jQuery.getScript(requiredResources[idx], function () {
        if ((idx + 1) &lt; requiredResources.length) {
            loadScript(idx + 1);
        } else {
            initExp();
        }
    });
}

if (window.Qualtrics &amp;&amp; (!window.frameElement || window.frameElement.id !== &quot;mobile-preview-view&quot;)) {
    loadScript(0);
}
</code></pre>
<h3 id="change-3-appending-the-display_stage-div-using-jquery">Change 3: Appending the display_stage Div using jQuery</h3>
<p>In Qualtrics, jQuery (loaded by default) is used to append the <code>display_stage_background</code> and <code>display_stage</code> Divs. The CSS for these elements will be added directly to Question HTML later in this tutorial.</p>
<pre><code class="language-js">// jQuery is loaded in Qualtrics by default
jQuery(&quot;&lt;div id = 'display_stage_background'&gt;&lt;/div&gt;&quot;).appendTo('body');
jQuery(&quot;&lt;div id = 'display_stage'&gt;&lt;/div&gt;&quot;).appendTo('body');
</code></pre>
<h3 id="change-4-wrapping-jspsychinit-in-a-function">Change 4: Wrapping jsPsych.init() in a function</h3>
<p>The main experiment codes are wrapped in the <code>initExp</code> function to make sure it runs after all the necessary library and plugin files are loaded (as defined in the <code>loadScript</code> function above).</p>
<h3 id="change-5-summarizing-and-save-the-results-to-qualtrics">Change 5: Summarizing and save the results to Qualtrics</h3>
<p><a href="https://www.jspsych.org/6.3/tutorials/rt-task/#part-11-data-aggregation">The jsPsych v6.3 tutorial</a> shows you how you can process and summarize the experiment results online. <strong>Wouldn't it be great if your experiment results are directly included in your Qualtrics data?</strong> </p>
<p>Well, you can actually summarize the results online and save those results in <a href="https://www.qualtrics.com/support/survey-platform/survey-module/survey-flow/standard-elements/embedded-data/">Qualtrics' Embedded Data</a> using the <a href="https://s.qualtrics.com/WRAPI/QuestionAPI/classes/Qualtrics%20JavaScript%20Question%20API.html#method_setEmbeddedData">setEmbeddedData</a> function.</p>
<p><code>demo-flanker-qualtrics.js</code> does so when the jsPsych experiment finishes by running the below code from <a href="https://github.com/kywch/jsPsych-in-Qualtrics/tree/master/flanker#part-5-presenting-feedback-to-the-participants"><code>debrief_block</code></a>.</p>
<pre><code class="language-js">jsPsych.init({
    timeline: timeline,
    display_element: 'display_stage',
    on_finish: function (data) {
        /* Change 5: Summarizing and save the results to Qualtrics */
        // summarize the results
        var total_trials = jsPsych.data.get().filter({
            trial_type: 'image-keyboard-response'
        }).count();
        var accuracy = Math.round(jsPsych.data.get().filter({
            correct: true
        }).count() / total_trials * 100);
        var congruent_rt = Math.round(jsPsych.data.get().filter({
            correct: true,
            stim_type: 'congruent'
        }).select('rt').mean());
        var incongruent_rt = Math.round(jsPsych.data.get().filter({
            correct: true,
            stim_type: 'incongruent'
        }).select('rt').mean());

        // save to qualtrics embedded data
        Qualtrics.SurveyEngine.setEmbeddedData(&quot;accuracy&quot;, accuracy);
        Qualtrics.SurveyEngine.setEmbeddedData(&quot;congruent_rt&quot;, congruent_rt);
        Qualtrics.SurveyEngine.setEmbeddedData(&quot;incongruent_rt&quot;, incongruent_rt);

        /* Change 6: Adding the clean up and continue functions.*/
        // clear the stage
        jQuery('#display_stage').remove();
        jQuery('#display_stage_background').remove();

        // simulate click on Qualtrics &quot;next&quot; button, making use of the Qualtrics JS API
        qthis.clickNextButton();
    }
});
</code></pre>
<h3 id="change-6-adding-the-clean-up-and-continue-functions">Change 6: Adding the clean up and continue functions</h3>
<p>When the jsPsych ends, <code>display_stage</code> and <code>display_stage_background</code> should be removed. Then, execulte the <code>clickNextButton</code> to simulate clicking the Next button and proceed to the next question.</p>
<hr />
<h2 id="finally-embedding-jspsych-in-qualtrics">Finally, embedding jsPsych in Qualtrics</h2>
<p>Let's log in to Qualtrics and take a look at each step.</p>
<h3 id="step-1-create-a-new-qualtrics-project-and-then-a-new-question">Step 1. Create a new Qualtrics project and then a new question</h3>
<p>Create a new Qualtrics project. Then, create a new question and (1) change its format to <strong>Text/Graphic</strong>.</p>
<p><img alt="Add JavaScript to a Qualtrics question" src="../img/hello-world-qualtrics-Step1_add_javascript_to_question.jpg" /></p>
<h3 id="step-2-open-the-question-javascript-editor-and-copy-paste-the-whole-demo-simple-rt-task-qualtricsjs">Step 2. Open the Question JavaScript editor and copy paste the whole <code>demo-simple-rt-task-qualtrics.js</code></h3>
<p>Keep going in the above picture. (2) Click the gear to open the dropdown menu, and then (3) find and click <strong>Add JavaScript</strong>.</p>
<p><img alt="Open the Question JavaScript editor" src="../img/hello-world-qualtrics-Step2_open_javascript_editor.jpg" /></p>
<h3 id="step-3-open-the-question-html-editor-and-copy-paste-the-portion-of-demo-flanker-transformed-with-display-elementhtml">Step 3. Open the Question HTML editor and copy paste the portion of <code>demo-flanker-transformed-with-display-element.html</code></h3>
<p>The Change 3 section of the <code>demo-flanker-transformed-with-display-element.html</code> file contains the link to jsPsych CSS file, the inline styles for <code>display_stage</code> Div, and the error message to be displayed when things go wrong.</p>
<p>To open the HTML editor, click the <code>HTML View</code> button. </p>
<p><img alt="Open the Question HTML editor" src="../img/hello-world-qualtrics-Step3_open_question_html_editor.jpg" /></p>
<p>Then, copy paste the portion of <code>demo-flanker-transformed-with-display-element.html</code> to the HTML editor, starting from <code>&lt;!-- COPY PASTE TO QUALTRICS FROM HERE --&gt;</code> to <code>&lt;!-- COPY PASTE TO QUALTRICS UP TO HERE --&gt;</code>. </p>
<pre><code class="language-html">&lt;!-- Change 3: Adding extra scripts for Qualtrics --&gt;
&lt;!-- COPY PASTE TO QUALTRICS FROM HERE --&gt;
&lt;link href=&quot;https://cdn.jsdelivr.net/gh/kywch/jsPsych-in-Qualtrics/flanker/jspsych-6.1.0/css/jspsych.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;&lt;/link&gt;

&lt;div&gt;
&lt;span style=&quot;font-size: 24px;&quot;&gt;
    &lt;br&gt;&lt;br&gt;
    If you are seeing this message for &lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;more than 5
        minutes&lt;/b&gt;&lt;/span&gt;,&lt;br&gt;
    please screen-capture this screen and send the image to us.
    &lt;br&gt;&lt;br&gt;
    &lt;span style=&quot;font-size: 28px;&quot;&gt;We are very sorry for the inconvenience.&lt;/span&gt;
&lt;/span&gt;
&lt;/div&gt;

&lt;!-- Change 2: Adding `display_stage` CSS and Div --&gt;
&lt;style&gt;
#display_stage_background {
    width: 100vw;
    background-color: white;
    z-index: -1;
}

#display_stage {
    position: fixed;
    left: 1vw;
    top: 1vh;
    height: 98vh;
    width: 98vw;
    background-color: white;
    box-shadow: 1px 1px 1px #999;
    border-radius: 15px;
    z-index: 0;
    overflow-y: hidden;
    overflow-x: hidden;
}
&lt;/style&gt;
&lt;!-- COPY PASTE TO QUALTRICS UP TO HERE --&gt;
</code></pre>
<p>After copy pasting, you should see something like below.</p>
<p><img alt="After copy-paste" src="../img/hello-world-qualtrics-Step3_after_copy_paste.jpg" /></p>
<h3 id="step-4-creating-embedded-data-elements">Step 4. Creating Embedded Data elements</h3>
<p>To store the experiment results -- <strong>accuracy</strong>, <strong>congruent_rt</strong>, and <strong>incongruent_rt</strong> -- in Qualtrics, you need to create the Embedded Data elements named <strong>accuracy</strong>, <strong>congruent_rt</strong>, and <strong>incongruent_rt</strong> in your survey by following <a href="https://www.qualtrics.com/support/survey-platform/survey-module/survey-flow/standard-elements/embedded-data/#CreatingAnEmbeddedDataElement">this Qualtrics tutorial</a>.</p>
<ol>
<li>Click <strong>Survey Flow</strong> from the Survey tab</li>
<li>Click <strong>Add a New Element Here</strong></li>
<li>Choose <strong>Embedded Data</strong> </li>
<li>Click <strong>Create New Field or Choose From Dropdown</strong> and type <strong>accuracy</strong></li>
<li>Click <strong>Set a Value Now</strong> and type -1</li>
<li>Click <strong>Add a New Field</strong> and type <strong>congruent_rt</strong></li>
<li>Click <strong>Set a Value Now</strong> and type -1</li>
<li>Click <strong>Add a New Field</strong> and type <strong>incogruent_rt</strong></li>
<li>Click <strong>Set a Value Now</strong> and type -1</li>
</ol>
<h3 id="step-5-move-set-embedded-data-block-to-the-top-of-survey-flow">Step 5. Move <code>Set Embedded Data</code> block to the top of Survey Flow</h3>
<p>The <code>accuracy</code>, <code>congruent_rt</code>, and <code>incongruent_rt</code> fields should be defined before the jsPsych reaction time task, 
so you need to move the Embedded Data block to the <strong>top</strong> of the Survey Flow.</p>
<p>Click and hold down <strong>Move</strong> to drag the Embedded Data to the top of the Survey Flow. After this, you should see the Survey Flow like below.</p>
<p><img alt="Move Embedded Data to the top" src="../img/flanker-qualtrics-Step5_move_block.jpg" /></p>
<h3 id="step-6-add-a-check-for-the-embedded-data">Step 6. Add a check for the Embedded Data</h3>
<p>You should make sure that the experiment results are saved correctly. 
You can do so by showing the <code>accuracy</code>, <code>congruent_rt</code>, and <code>incongruent_rt</code> Embedded Data after the reaction task.</p>
<ol>
<li>Click <strong>Add Page Break</strong></li>
<li>Click <strong>Create a New Question</strong></li>
<li>Change Question Type to <strong>Text/Graphic</strong></li>
<li>Type <code>${e://Field/accuracy}</code>, <code>${e://Field/congruent_rt}</code>, and <code>${e://Field/incongruent_rt}</code> to access these Embedded Data</li>
</ol>
<p><img alt="Show Embedded Data" src="../img/flanker-qualtrics-Step6_show_data.jpg" /></p>
<h3 id="step-7-publish-and-test">Step 7. Publish and test!</h3>
<p>Publish the survey by following <a href="https://www.qualtrics.com/support/survey-platform/survey-module/survey-publishing-versions/#PublishingNew">this Qualtrics tutorial</a>. Then, an anonymous Qualtrics link is generated. If you click this link, you should be able to see the same reaction time task running in Qualtrics. For example, try <a href="https://ssd.az1.qualtrics.com/jfe/form/SV_enXPx66m9iOM6Sp">this Qualtrics link</a>.</p>
<hr />
<h2 id="do-you-also-want-to-save-the-trial-by-trial-data">Do you also want to save the trial-by-trial data?</h2>
<p>Then, you need a server that can receive your data. See the tutorial <a href="../save-php/">Saving data to a web server using PHP</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../rt-task/" class="btn btn-neutral float-left" title="Embedding Reaction-Time Task"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../choose-and-solve/" class="btn btn-neutral float-right" title="Embedding Choose-And-Solve Task">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2020-2023 <a href="https://kywch.github.io/" target="_blank">Kyoung Whan Choe</a>. </p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../rt-task/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../choose-and-solve/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
